<!DOCTYPE html>
<html>

<head>
    <title>Calculadora Média Final Secundário</title>
    <meta charset="utf-8">
    <!--Icon-->
    <link rel="icon" href="./imgs/Calculator.ico">
    <!--Bootstrap-->
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Fredoka+One" rel="stylesheet">
    <!--Responsive-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="width" name="MobileOptimized">
    <meta content="true" name="HandheldFriendly">
    <!--File Saver-->
    <script src="FileSaver.js"></script>
</head>

<style>
    .title {
        font-family: 'Fredoka One', cursive;
        color: brown;
        text-align: center;
    }

    .responsive {
        width: 20vw;
        height: auto;
    }

    .tabelaNotas {
        margin: 0 auto;
        width: 100%;
    }

    #styleTable {
        margin: 0 auto;
        width: 80%;
        border: 2px solid rgba(58, 58, 58, 0.774) !important;
    }

    #infoTitle {
        text-align: center;
        margin: 0 auto;
    }

    #buttonsContent {
        text-align: right;
        width: 80%;
        position: relative;
        margin: 0 auto;
    }

    .button {
        display: inline-block;
    }

    button {
        background-color: brown;
        color: white;
    }

    button:hover {
        background-color: rgba(165, 42, 42, 0.788);
    }

    th {
        text-align: center !important;
        vertical-align: middle !important;
    }

    .col-7,
    .col-9,
    .col-10 {
        margin: auto;
        vertical-align: middle;
    }

    td {
        vertical-align: middle !important;
    }

    #headerDiv {
        overflow: hidden;
        margin: 0 auto;
    }

    #logo {
        float: right;
        margin-right: 1%;
    }

    #headerTitle {
        margin-left: 1%;
        margin-top: 1%;
        float: left;
        text-align: center;
        vertical-align: middle;
    }
</style>

<body style="background-color: #F1FAF9;">
    <header>
        <div id="headerDiv">
            <div id="logo">
                <a href="http://www.ipg.pt/estg/ensino_licenciatura.aspx?id=4&curso=Engenharia%20Inform%C3%A1tica"
                    target="_blank"><img alt="Logotipo IPG" class="responsive" src="imgs/logotipo_ipg.png" /></a>
            </div>
            <div id="headerTitle">
                <h1 class="title" style="font-size: 3.5vw;">CALCULADORA DE MÉDIA</h1>
            </div>
        </div>
    </header>
    <main>
        <p></p>
        <h2 class="title" style="font-size: 25px;">Preenche as tuas notas</h2>
        <h6 id="infoTitle">Notas da Disciplina: (Nota de 0-20)</h6><br>
        <div id="styleTable" class="table-responsive">
            <table class="table table-striped tabelaNotas">
                <thead>
                    <tr>
                        <th scope="col" style="font-size: 20px;">Disciplinas</th>
                        <th scope="col" style="font-size: 20px;">10º Ano</th>
                        <th scope="col" style="font-size: 20px;">11º Ano</th>
                        <th scope="col" style="font-size: 20px;">12º Ano</th>
                        <th scope="col" style="font-size: 20px;">Exame Nacional <br>
                            <span style="font-size: 10px;">(Nota de <b>0</b> a <b>200</b>)</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Português</th>
                        <td>
                            <div style="width: 130px;" class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-pt">
                            </div>
                        </td>
                        <td>
                            <div style="width: 130px;" class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-pt">
                            </div>
                        </td>
                        <td>
                            <div style="width: 130px;" class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-pt">
                            </div>
                        </td>
                        <td>
                            <div style="width: 160px;" class="col-9">
                                <input class="form-control" type="number" value="100" min="0" max="200"
                                    id="nota-exame-pt">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input nota-exame-pt" type="checkbox" id="checkBtnPIPT"
                                        value="option1">
                                    <label class="form-check-label">P.I.?</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Filosofia</th>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-fil">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-fil">
                            </div>
                        </td>
                        <td>

                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control" type="number" value="100" min="0" max="200"
                                    id="nota-exame-fil" readonly>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="checkBtnFilosofia"
                                        value="option1">
                                    <label class="form-check-label">Exame?</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input nota-exame-fil" type="checkbox" id="checkBtnPIFil"
                                        value="option1">
                                    <label class="form-check-label">P.I.?</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">L. Estrangeira</th>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-le">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-le">
                            </div>
                        </td>
                        <td>

                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control" type="number" value="100" min="0" max="200"
                                    id="nota-exame-le" readonly>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="checkBtnLEstrangeira"
                                        value="option1">
                                    <label class="form-check-label">Exame?</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input nota-exame-le" type="checkbox"
                                        id="checkBtnPILEstrangeira" value="option1">
                                    <label class="form-check-label">P.I.?</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Matemática</th>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-mat">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-mat">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-mat">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control" type="number" value="100" min="0" max="200"
                                    id="nota-exame-mat">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input nota-exame-mat" type="checkbox" id="checkBtnPIMat"
                                        value="option1">
                                    <label class="form-check-label">P.I.?</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">E. Física</th>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-ef">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-ef">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-ef">
                            </div>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <div style="width: 310px;" class="col-10">
                                <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="selectListBienal1">
                                    <option selected>Bienal 1...</option>
                                    <option value="1">Física e Química A</option>
                                    <option value="2">Biologia e Geologia</option>
                                    <option value="3">Geometria Descritiva A</option>
                                </select>
                            </div>
                        </th>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-bienal1">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-bienal1">
                            </div>
                        </td>
                        <td>

                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control" type="number" value="100" min="0" max="200"
                                    id="nota-exame-bienal1" readonly>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="checkBtnBienal1"
                                        value="option1">
                                    <label class="form-check-label">Exame?</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input nota-exame-bienal1" type="checkbox"
                                        id="checkBtnPIBienal1" value="option1">
                                    <label class="form-check-label">P.I.?</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <div class="col-10">
                                <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="selectListBienal2">
                                    <option selected>Bienal 2...</option>
                                    <option value="1">Física e Química A</option>
                                    <option value="2">Biologia e Geologia</option>
                                    <option value="3">Geometria Descritiva A</option>
                                </select>
                            </div>
                        </th>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-bienal2">
                            </div>
                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-bienal2">
                            </div>
                        </td>
                        <td>

                        </td>
                        <td>
                            <div class="col-9">
                                <input class="form-control" type="number" value="100" min="0" max="200"
                                    id="nota-exame-bienal2" readonly>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="checkBtnBienal2"
                                        value="option1">
                                    <label class="form-check-label">Exame?</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input nota-exame-bienal2" type="checkbox"
                                        id="checkBtnPIBienal2" value="option1">
                                    <label class="form-check-label">P.I.?</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <div class="col-10">
                                <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="selectListOpt1">
                                    <option selected>Opção 1...</option>
                                    <option value="1">Biologia</option>
                                    <option value="2">Física</option>
                                    <option value="3">Química</option>
                                    <option value="3">Geologia</option>
                                </select>
                            </div>

                        </th>
                        <td></td>
                        <td></td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-op1">
                            </div>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <th scope="row">
                            <div class="col-10">
                                <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="selectListOpt2">
                                    <option selected>Opção 2...</option>
                                    <option value="1">Aplicações Informáticas B</option>
                                    <option value="2">Física</option>
                                    <option value="3">Biologia</option>
                                    <option value="4">Química</option>
                                    <option value="5">Geologia</option>
                                    <option value="6">Psicologia B</option>
                                    <option value="7">L. Estrangeira I, II ou III</option>
                                    <option value="8">Economia C</option>
                                    <option value="9">Geografia C</option>
                                    <option value="10">Direito</option>
                                    <option value="11">Ciência Política</option>
                                    <option value="12">Clássicos da Literatura</option>
                                </select>
                            </div>
                        </th>
                        <td></td>
                        <td></td>
                        <td>
                            <div class="col-9">
                                <input class="form-control notasCIF" type="number" value="10" min="0" max="20"
                                    id="nota-op2">
                            </div>
                        </td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <br>
            <div style="margin-left: 5%; width: 70vw;" class="form-group row">
                <div>
                    <label><b>Peso das Provas de Ingresso (0-100) %</b></label>
                    <input class="form-control col-4" id="perc-pi" type="number" value="50" min="0" max="100">
                </div>
            </div>
            <br>
        </div>
    </main>
    <br>
    <div id="buttonsContent">
        <div class="button" style="margin-bottom: 5px;">
            <!--Botão Calcular-->
            <button id="btnCalcular" type="button" class="btn btn-lg"><i class="fa fa-calculator fa-lg"></i>
                Calcular</button>
        </div>
        <div class="button">
            <!--Botão Limpar-->
            <button id="btnLimpar" type="button" class="btn btn-lg">
                <i class="fa fa-remove fa-lg"></i> Limpar campos</button>
        </div>
    </div>

    <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Resultado</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    A sua <b>média final</b> é de <span id="mediaFinal"
                        style="color: brown; font-family: Haettenschweiler; font-size: 40px;"></span> valores!
                    <hr>
                    <b>Nota de Candidatura</b><br>
                    <!-- <em>(Licenciatura em Engenharia Informática - IPG)</em><br> -->
                    <center><span id="notaCandidatura"
                            style="color: brown; font-family: Haettenschweiler; font-size: 40px;"></span> valores!
                    </center>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" onclick="saveResultados()"><i class="fa fa-save fa-lg"></i>Guardar</button>
                    <button type="button" class="btn btn-success" data-dismiss="modal"><i class="fa fa-check fa-lg"></i>Ok</button>
                </div>

            </div>
        </div>
    </div>

    <br>
    <footer
        style="text-align: center; background-color: rgba(160, 160, 160, 0.815); padding: 10px; margin-bottom: 0px; font-family: sans-serif;">
        <i class="fa fa-envelope fa-lg"></i> <a href="mailto:cristianop.patricio@gmail.com"
            target="_blank">cristianop.patricio@gmail.com</a> &nbsp; &nbsp; &nbsp; <i class="fa fa-github fa-lg"></i> <a
            href="https://github.com/CristianoPatricio" target="_blank">github.com/CristianoPatricio</a> &nbsp; &nbsp;
        &nbsp; <i class="fa fa-linkedin fa-lg"></i> <a href="https://www.linkedin.com/in/cristiano-p-a7284a119/"
            target="_blank">Cristiano Patrício</a> &nbsp; | &nbsp; <b>© 2019 CP</b> - <em>WS JavaScript @ IPG 2019</em>
    </footer>

    <script>
        // Ativa ou Desativa campos 'exames'
        showInputNumberExam("nota-exame-fil", "checkBtnFilosofia");
        showInputNumberExam("nota-exame-le", "checkBtnLEstrangeira");
        showInputNumberExam("nota-exame-bienal1", "checkBtnBienal1");
        showInputNumberExam("nota-exame-bienal2", "checkBtnBienal2");

        // Ação Botão Calcular
        var mediaFinal = 0;
        var notaCandidatura = 0;

        var $btnCalcular = document.querySelector("#btnCalcular");

        $btnCalcular.addEventListener('click', function () {
            var $spanMediaFinal = document.querySelector("#mediaFinal");
            var $spanNotaCandidatura = document.querySelector("#notaCandidatura");
            var pesoProvasIngresso = document.querySelector("#perc-pi").value / 100;
            var pesoMediaFinal = 1 - pesoProvasIngresso;

            // Se os campos estiverem validados
            if (validaCampos()) {
                mediaFinal = (calcularMediaFinal()).toFixed(2);

                //var notaCandidatura = ((mediaFinal * 0.65) + ((notaMatA / 10) * 0.35)).toFixed(2);
                if (getProvasIngresso() == 0) {
                    alert("Tem de selecionar pelo menos uma prova de ingresso!");
                } else {
                    notaCandidatura = notaFinalCandidatura(mediaFinal, getProvasIngresso(), pesoMediaFinal, pesoProvasIngresso);

                    $spanMediaFinal.textContent = mediaFinal;
                    $spanNotaCandidatura.textContent = notaCandidatura;

                    // Mostrar resultados no modal
                    $('#myModal').modal();
                }
            } else {
                // Sair da função
                return;
            }
        });

        // Ação Botão Limpar
        var $btnLimpar = document.querySelector("#btnLimpar");

        $btnLimpar.addEventListener('click', function () {
            limpaCampos();
        });

        // Ação Input Number Fields
        var $inputNumberFields = document.querySelectorAll(".form-control");

        $inputNumberFields.forEach(function (input) {
            input.addEventListener('input', function () {
                // Remover cor de background quando há input de dados
                input.style.backgroundColor = "";
            });
        });

        /*
        * Guarda os resultados num ficheiro .txt 
        */
        function saveResultados(){
            var resultados = "##Resultados##\r\n>>A sua média final é de "+mediaFinal+" valores.\r\n>>Nota de Candidatura: "+notaCandidatura+" valores.\r\n";
            resultados += "\r\n****Resultados gerados por Calculadora Média Final Secundário © CP 2019****"
            var blob = new Blob([resultados], {type: "text/plain;charset=utf-8"});
            saveAs(blob, "notacandidatura.txt");
        }

        /** 
         * Coloca num array as notas dos exames que tiverem na checkbox P.I. um check  
         *
         * @return {array} com as notas dos exames que
         */
        function getProvasIngresso() {
            var $piInputs = document.querySelectorAll("[id*='checkBtnPI']");
            var piArray = new Array();

            $piInputs.forEach(function (input) {
                if (input.checked) {
                    var $inputNotaExame = document.querySelector("[id*='" + input.className.split(' ')[1] +
                        "']");
                    piArray.push(getNotaExame($inputNotaExame.id));
                }
            });

            if (piArray === null) {
                return 0;
            } else {
                return piArray;
            }
        }

        /** 
         * Cálculo da nota final de candidatura através da fórmula: 
         * nota = (mediaSecundario * percMediaSecundario + media([provasIngresso]) * percProvasIngresso
         *
         * @param {float} : mediaSecundario
         * @param {array} : provasIngresso
         * @param {float} : percMediaSecundario
         * @param {float} : percProvasIngresso
         *
         * @return {float} : nota final de candidatura com precisão de duas casas decimais.
         */
        function notaFinalCandidatura(mediaSecundario, provasIngresso, percMediaSecundario, percProvasIngresso) {
            return (mediaSecundario * percMediaSecundario + (calcularMedia(provasIngresso) * percProvasIngresso))
                .toFixed(2);
        }

        /**
         * Devolve a nota de exame de 0-20
         *
         * @param {string} idCampo : identificador do campo input que contém a nota do exame
         *
         * @return {float} : nota do exame (0.0-20.0)
         */
        function getNotaExame(idCampo) {
            return document.querySelector("#" + idCampo).value / 10;
        }

        /**
         * @param {array} arr : array com as notas 
         *
         * @return média
         */
        function calcularMedia(arr) {
            var total = 0;
            var qtd = arr.length;
            var x = 0;

            while (arr[x]) {
                total += arr[x];
                x++
            }

            return (total / qtd);
        }

        /**
         * @param {string} inputNumber : id do campo inputNumber
         * @param {string} checkBtn : id do check button
         * Ativa ou desativa o input number (prop. readonly)
         */
        function showInputNumberExam(inputNumber, checkBtn) {
            var $input = document.querySelector("#" + inputNumber);
            var $check = document.querySelector("#" + checkBtn);

            $check.addEventListener('change', function () {
                // Está 'check'?
                if (this.checked) {
                    // remove atributo
                    $input.removeAttribute('readonly');
                } else {
                    // adiciona atributo
                    $input.readOnly = true;
                }
            });
        }

        /**
         * @return mediaFinal
         */
        function calcularMediaFinal() {
            // Array que guarda as notas finais
            var arrNotasFinais = new Array();

            // Média final da disciplina de PT
            var notaFinalPT = getMediaFinalDisciplina("nota-pt", "nota-exame-pt", 0);
            // Inserir valor no array
            arrNotasFinais.push(parseFloat(notaFinalPT));

            var notaFinalFIL = getMediaFinalDisciplina("nota-fil", "nota-exame-fil", "checkBtnFilosofia");
            arrNotasFinais.push(parseFloat(notaFinalFIL));

            var notaFinalLE = getMediaFinalDisciplina("nota-le", "nota-exame-le", "checkBtnLEstrangeira");
            arrNotasFinais.push(parseFloat(notaFinalLE));

            var notaFinalMAT = getMediaFinalDisciplina("nota-mat", "nota-exame-mat", 0);
            arrNotasFinais.push(parseFloat(notaFinalMAT));

            var notaFinalEF = getMediaFinalDisciplina("nota-ef", 0, 0);
            arrNotasFinais.push(parseFloat(notaFinalEF));

            var notaFinalBienal1 = getMediaFinalDisciplina("nota-bienal1", "nota-exame-bienal1", "checkBtnBienal1");
            arrNotasFinais.push(parseFloat(notaFinalBienal1));

            var notaFinalBienal2 = getMediaFinalDisciplina("nota-bienal2", "nota-exame-bienal2", "checkBtnBienal2");
            arrNotasFinais.push(parseFloat(notaFinalBienal2));

            var notaFinalOpt1 = getMediaFinalDisciplina("nota-op1", 0, 0);
            arrNotasFinais.push(parseFloat(notaFinalOpt1));

            var notaFinalOpt2 = getMediaFinalDisciplina("nota-op2", 0, 0);
            arrNotasFinais.push(parseFloat(notaFinalOpt2));

            // Cálculo da média final
            var mediaFinal = calcularMedia(arrNotasFinais);

            return mediaFinal;
        }

        /**
         * @param inputNumber {string} : id do input de dados (CI)
         * @param inputNumberExam {string} : id do input de dados (Nota Exame)
         * @param checkBtn {string} : id do checkButton, quando existe
         * @return notaFinal
         */
        function getMediaFinalDisciplina(inputNumber, inputNumberExam, checkBtn) {
            var $notas = document.querySelectorAll("#" + inputNumber);
            var notaExame = inputNumberExam !== 0 ? document.querySelector("#" + inputNumberExam).value : null;
            var arrNotas = new Array();
            var mediaCIF = 0;
            var notaFinal = 0;

            // Guardar as notas no array arrNotas
            $notas.forEach(function (notas) {
                arrNotas.push(parseFloat(notas.value));
            });

            // Cálculo CIF
            mediaCIF = calcularMedia(arrNotas);
            // Debug
            //console.log("Média CIF: " + mediaCIF);

            // Existe um check button associado ao campo da nota do Exame Nacional?
            if (checkBtn === 0) { //Não
                // Nota Final = CIF * 0.7 + CE * 0.3
                notaFinal = notaExame == null ? mediaCIF : (mediaCIF * 0.7) + ((notaExame / 10) * 0.3);
            } else { //Sim
                var chkBtn = document.querySelector("#" + checkBtn);

                if (chkBtn.checked === true) {
                    // Debug
                    //console.log("botão check!");
                    notaFinal = (mediaCIF * 0.7) + ((notaExame / 10) * 0.3);
                } else {
                    notaFinal = mediaCIF;
                }
            }

            // Debug
            //console.log("Nota Final: " + notaFinal);

            return notaFinal;

        }

        /**
         * Todos os campos adquirem o estado inicial
         */
        function limpaCampos() {
            var $inputsNotasCIF = document.querySelectorAll(".notasCIF");

            // Reset input numbers
            $inputsNotasCIF.forEach(function (input) {
                input.value = 10;
                input.style.backgroundColor = "";
            });

            var $inputsNotasExames = document.querySelectorAll("[id^='nota-exame']");
            // The selector means: get an element where the attribute [id] begins with the string "nota-exame".
            // ^ matches the start
            // * matches any position
            // $ matches the end

            // Reset input numbers
            $inputsNotasExames.forEach(function (input) {
                input.value = 100;
                input.style.backgroundColor = "";
            });

            // Reset select lists
            document.querySelector("#selectListBienal1").selectedIndex = 0;
            document.querySelector("#selectListBienal2").selectedIndex = 0;
            document.querySelector("#selectListOpt1").selectedIndex = 0;
            document.querySelector("#selectListOpt2").selectedIndex = 0;

            // uncheck buttons
            document.querySelector("#checkBtnFilosofia").checked = false;
            document.querySelector("#checkBtnLEstrangeira").checked = false;
            document.querySelector("#checkBtnBienal1").checked = false;
            document.querySelector("#checkBtnBienal2").checked = false;

            // Reset property readonly 
            document.querySelector("#nota-exame-fil").readOnly = true;
            document.querySelector("#nota-exame-le").readOnly = true;
            document.querySelector("#nota-exame-bienal1").readOnly = true;
            document.querySelector("#nota-exame-bienal2").readOnly = true;
        }

        /**
         * Se o valor dos campos for negativo ou superior a 20, lança mensagem de alerta
         * @return true se os campos estiverem validados
         * @return false se os campos não estiverem validados
         */
        function validaCampos() {
            var validados = true;
            var mensagemExame = false;
            var mensagemDisc = false;
            var mensagemPesoPI = false;
            var campoNulo = false;

            var $notasExames = document.querySelectorAll("[id^='nota-exame']");

            $notasExames.forEach(function (nota) {
                if (nota.value < 0 || nota.value > 200) {
                    // definir background avermelhado
                    nota.style.backgroundColor = "rgba(165, 42, 42, 0.473)";
                    // mensagem
                    mensagemExame = true;
                    validados = false;
                } else if (nota.value === "") {
                    // definir background avermelhado
                    nota.style.backgroundColor = "rgba(165, 42, 42, 0.473)";
                    // mensagem
                    campoNulo = true;
                    validados = false;
                }
            });

            if (mensagemExame) {
                alert("Deve inserir valores entre 0 e 200 na nota do exame nacional!");
            }

            var $notasCIF = document.querySelectorAll(".notasCIF");

            $notasCIF.forEach(function (nota) {
                if (nota.value < 0 || nota.value > 20) {
                    // definir background avermelhado
                    nota.style.backgroundColor = "rgba(165, 42, 42, 0.473)";
                    // mensagem
                    mensagemDisc = true;
                    validados = false;
                } else if (nota.value === "") {
                    // definir background avermelhado
                    nota.style.backgroundColor = "rgba(165, 42, 42, 0.473)";
                    // mensagem
                    campoNulo = true;
                    validados = false;
                }
            });

            var $pesoPI = document.querySelector("#perc-pi");

            if ($pesoPI.value < 0 || $pesoPI > 100) {
                validados = false;
                $pesoPI.style.backgroundColor = "rgba(165, 42, 42, 0.473)";
                mensagemPesoPI = true;
            }

            if (mensagemPesoPI) {
                alert("Atenção! O valor do peso das provas de ingresso deve ser entre 0 e 100.");
            }

            if (mensagemDisc) {
                alert("Deve inserir valores entre 0 e 20 na nota interna da disciplina!");
            }

            if (campoNulo === true) {
                alert("Atenção! Todos os campos são de preenchimento obrigatório. Não pode haver campos vazios.");
            }

            return validados;
        }
    </script>
</body>

</html>